# Send emails about new files in a repository

This repository is a plugin for drone which lists all new files in a repo
between two git refs, and then emails this list to a preconifgured address.

## Configuration

This script uses the following environment variables:

* `SMTP_SERVER_ADDRESS`

    The SMTP server address.

* `SMTP_SERVER_PORT` (defaults to 587)
   
   The SMTP server port (uses STARTTLS).

* `SMTP_SERVER_USERNAME`

   The username for authenticating with the SMTP server.

* `SMTP_SERVER_PASSWORD`

   The password for authenticating with the SMTP server.

* `EMAIL_FROM_ADDRESS`

   The email address to send the notification email from.

* `EMAIL_TO_ADDRESS`

   The email address to send the notification email to.

* `EMAIL_SUBJECT`

   The subject for the sent email.

* `EMAIL_MESSAGE_TEMPLATE`

   The template for the email body should contain `{urls}` for a list of URLs
   for the changed files.

* `GIT_FILE_HTTP_BASE_URL`

   The http base URL for to link to files in the repo.

* `GIT_MAIN_REF`

   The git ref (branch or tag) on which new files are added, i.e. `'master'`.

* `GIT_LAST_EMAIL_REF`

   The git ref at which the email was last sent, the file list will be
   generated by finding new files in the repository which were added between
   this ref and `GIT_MAIN_REF`.
